var canvasDrawing=function(){"use strict";function t(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t=function(){return e};var e={},n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var c=w(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=l(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function l(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=s;var f={};function h(){}function v(){}function d(){}var p={};u(p,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(C([])));y&&y!==n&&r.call(y,o)&&(p=y);var m=d.prototype=h.prototype=Object.create(p);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){function n(i,o,a,c){var u=l(t[i],t,o);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==typeof f&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(f).then((function(t){s.value=t,a(s)}),(function(t){return n("throw",t,a,c)}))}c(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=l(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function C(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=d,u(m,"constructor",d),u(d,"constructor",v),v.displayName=u(d,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,u(t,c,"GeneratorFunction")),t.prototype=Object.create(m),t},e.awrap=function(t){return{__await:t}},x(b.prototype),u(b.prototype,a,(function(){return this})),e.AsyncIterator=b,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new b(s(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(m),u(m,c,"Generator"),u(m,o,(function(){return this})),u(m,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:C(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function e(t,e,n,r,i,o,a){try{var c=t[o](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,i)}function n(t){return function(){var n=this,r=arguments;return new Promise((function(i,o){var a=t.apply(n,r);function c(t){e(a,i,o,c,u,"next",t)}function u(t){e(a,i,o,c,u,"throw",t)}c(void 0)}))}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&r.firstChild?r.insertBefore(i,r.firstChild):r.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}('.__edb-textarea-box {\n  position: absolute;\n  z-index: 101;\n  width: auto;\n  overflow-y: hidden;\n  overflow-x: hidden;\n  word-wrap: break-word;\n  word-break: break-all;\n  color: #aaa;\n  border: 1px dashed gray;\n}\n.__edb-textarea-box .__edb-textarea {\n  resize: none;\n  background: transparent;\n  border: none;\n  padding: 1px;\n  outline: none;\n  font-family: "PingFang SC", "Microsoft YaHei", "微软雅黑";\n  overflow: hidden;\n}\n.__edb-text-pre {\n  position: absolute;\n  z-index: 999;\n  top: 0;\n  left: -9999px;\n  min-width: 100px;\n  display: inline-block;\n  padding: 1px;\n  border: 1px solid red;\n  font-family: "PingFang SC", "Microsoft YaHei", "微软雅黑";\n}\n.__edb-eraser-hover {\n  cursor: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAEm0lEQVRYR62XbUxbVRjH/7cUxlrWQW9fBmNsDGROwG1B6C1my5ahERcTTSRMcXIH6NwSv6gxmckMaPywxCXGQTdfMpuMwdiLbI5Fs7HhNCIGlNCOwTbGW3kr76hbJkKPuRdb29tyewDvlyb3Pvf8fs9znnN6LoP/6So0a7QEYdVKKJZNE5fV2jB6nGZohiYoWEzxdii7H7J/b9QYZiKUYcrG8T4ApMTaMF4c7N0lC7yeFqOaDv3rfpYxEVmGBJFnnxrCqd4WKoklCfCbIyMRHjLhDRcEbFNDqBAFhEu+EosW2JNpNIS4ZpxZxgRkGRI9lW6ZHESlw4YDuaniPUuVXVZiUQJ5Jm1sKMM4pPDmyQFUOewiPD3ZKAo0tjplJRYsUJSxMn5GoeyUwn+bGMCZPl+4uyxyEgsSKHhSt8E1S9qlc9400Y9zfTd9Mpd2v5dEsbVhvMT9nFqAN0elgihs0syFJXe+v1UWLlcJKoF8ky6NYUiTNPNfxh2o7r9FBRckmlqHYTljAyH/rY6gArxJy4FhfpZm3jDmwIUBevivbcNiMyavMGK9OgoXB9pACLNPViA/U7+NcbluSOH1Y734ZqCNOvPm9hERvjHCgLy4TeKM1A53oM7Z1TKvQAHHZrmAq1L4T6M9uDTYTg1vuT0qwjeo9R64W+C6szOwAG/SPwvGdVkK/3G0G5cHb1PDbXfHYDltQ5LKH17rvBd4CvgM9nkoUC2F3xjpwrdDd6jhNzsEuB2Jy3V+mQtwgIjL0WcKeE63HSB1Uvj3I134bgHwW53jKKu0IyGclcDvodbZ4bM1BxW4PtyJK8671Jm3d02grNKG+GXB4UIv+Ajk5CAkamTNpemHD7KFKjBgcNXZQQ2/0zOJsgob1oZpZcvuvUt6BPJMWo06XHUhNjElzZS9W1P58dtinPcfi9zhoqN3EqUVdsSFRs1Xdp8t2GcrfiVNFx2uDvs6em1SSmHJlxFh4SrY669AkOAeX4V9L6bIHmw6+6ZEeGxIJHXmHoFCsz4RIcpz+tXrHuEPHVNptAYPzC2xdUsMCl54LKBEV//vKK2wYbVCCvdvuEADMEXbYuojdas27zl4dPnFzz6E6ZndSM182k9iR3osXn3uUZ8xegb/QOkpG6KZlfNlHvRcyOw1a98nhCnZmbtfHPxa1TG89M6RgBJPmePwcnaSGOcY+lOEG6FZNNyzCniOfQ/AR3MSDK5VWeaV2LV1HcybVuFouR0GsiLoOpdtHu9lmM+x7zLAYe9KFH1wAutT0v2mI0avBju9dLjfPsBz2rcA5oi7EvHJT/gICC+4G3NLZAxy18wdPGuH6RouYBNKb/Ic+yaAT3fmHoAg8sWhAvE3UCUy2TiolKH4d28P2nBUAkLQXo7dTwCLICFc0kqc/eQgaf6hxmsXpfsKohYQAnlO9xpAPndXwv1ytaWYNNaeZ0AUu6CYVYMgmeYTbL5mlD0R8RzLA/jKLVFz4rCrvqZcAQUyrPVjjcE6nOZ50DNhPqfLY0DKd+S84ao7e1wBzMZbGya7aQaniQkqMNcT2lwC5vTsA2XESZvzPs3AtDH/ANJxaF2ajW5TAAAAAElFTkSuQmCC") 0 32, auto;\n}\n');var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},c=function(t){return t&&t.Math==Math&&t},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof a&&a)||function(){return this}()||Function("return this")(),s={},l=function(t){try{return!!t()}catch(t){return!0}},f=!l((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),h=!l((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),v=h,d=Function.prototype.call,p=v?d.bind(d):function(){return d.apply(d,arguments)},g={},y={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,x=m&&!y.call({1:2},1);g.f=x?function(t){var e=m(this,t);return!!e&&e.enumerable}:y;var b,w,E=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},S=h,O=Function.prototype,C=O.bind,k=O.call,A=S&&C.bind(k,k),P=S?function(t){return t&&A(t)}:function(t){return t&&function(){return k.apply(t,arguments)}},T=P,j=T({}.toString),I=T("".slice),L=function(t){return I(j(t),8,-1)},R=l,M=L,_=Object,N=P("".split),D=R((function(){return!_("z").propertyIsEnumerable(0)}))?function(t){return"String"==M(t)?N(t,""):_(t)}:_,H=TypeError,Y=function(t){if(null==t)throw H("Can't call method on "+t);return t},F=D,z=Y,U=function(t){return F(z(t))},B=function(t){return"function"==typeof t},X=B,W=function(t){return"object"==typeof t?null!==t:X(t)},G=u,Q=B,K=function(t){return Q(t)?t:void 0},Z=function(t,e){return arguments.length<2?K(G[t]):G[t]&&G[t][e]},V=P({}.isPrototypeOf),J=Z("navigator","userAgent")||"",q=u,$=J,tt=q.process,et=q.Deno,nt=tt&&tt.versions||et&&et.version,rt=nt&&nt.v8;rt&&(w=(b=rt.split("."))[0]>0&&b[0]<4?1:+(b[0]+b[1])),!w&&$&&(!(b=$.match(/Edge\/(\d+)/))||b[1]>=74)&&(b=$.match(/Chrome\/(\d+)/))&&(w=+b[1]);var it=w,ot=it,at=l,ct=!!Object.getOwnPropertySymbols&&!at((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ot&&ot<41})),ut=ct&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,st=Z,lt=B,ft=V,ht=Object,vt=ut?function(t){return"symbol"==typeof t}:function(t){var e=st("Symbol");return lt(e)&&ft(e.prototype,ht(t))},dt=String,pt=function(t){try{return dt(t)}catch(t){return"Object"}},gt=B,yt=pt,mt=TypeError,xt=function(t){if(gt(t))return t;throw mt(yt(t)+" is not a function")},bt=xt,wt=function(t,e){var n=t[e];return null==n?void 0:bt(n)},Et=p,St=B,Ot=W,Ct=TypeError,kt={exports:{}},At=u,Pt=Object.defineProperty,Tt=function(t,e){try{Pt(At,t,{value:e,configurable:!0,writable:!0})}catch(n){At[t]=e}return e},jt=Tt,It="__core-js_shared__",Lt=u[It]||jt(It,{}),Rt=Lt;(kt.exports=function(t,e){return Rt[t]||(Rt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.23.5",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.5/LICENSE",source:"https://github.com/zloirock/core-js"});var Mt=Y,_t=Object,Nt=function(t){return _t(Mt(t))},Dt=Nt,Ht=P({}.hasOwnProperty),Yt=Object.hasOwn||function(t,e){return Ht(Dt(t),e)},Ft=P,zt=0,Ut=Math.random(),Bt=Ft(1..toString),Xt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Bt(++zt+Ut,36)},Wt=u,Gt=kt.exports,Qt=Yt,Kt=Xt,Zt=ct,Vt=ut,Jt=Gt("wks"),qt=Wt.Symbol,$t=qt&&qt.for,te=Vt?qt:qt&&qt.withoutSetter||Kt,ee=function(t){if(!Qt(Jt,t)||!Zt&&"string"!=typeof Jt[t]){var e="Symbol."+t;Zt&&Qt(qt,t)?Jt[t]=qt[t]:Jt[t]=Vt&&$t?$t(e):te(e)}return Jt[t]},ne=p,re=W,ie=vt,oe=wt,ae=function(t,e){var n,r;if("string"===e&&St(n=t.toString)&&!Ot(r=Et(n,t)))return r;if(St(n=t.valueOf)&&!Ot(r=Et(n,t)))return r;if("string"!==e&&St(n=t.toString)&&!Ot(r=Et(n,t)))return r;throw Ct("Can't convert object to primitive value")},ce=TypeError,ue=ee("toPrimitive"),se=function(t,e){if(!re(t)||ie(t))return t;var n,r=oe(t,ue);if(r){if(void 0===e&&(e="default"),n=ne(r,t,e),!re(n)||ie(n))return n;throw ce("Can't convert object to primitive value")}return void 0===e&&(e="number"),ae(t,e)},le=vt,fe=function(t){var e=se(t,"string");return le(e)?e:e+""},he=W,ve=u.document,de=he(ve)&&he(ve.createElement),pe=function(t){return de?ve.createElement(t):{}},ge=pe,ye=!f&&!l((function(){return 7!=Object.defineProperty(ge("div"),"a",{get:function(){return 7}}).a})),me=f,xe=p,be=g,we=E,Ee=U,Se=fe,Oe=Yt,Ce=ye,ke=Object.getOwnPropertyDescriptor;s.f=me?ke:function(t,e){if(t=Ee(t),e=Se(e),Ce)try{return ke(t,e)}catch(t){}if(Oe(t,e))return we(!xe(be.f,t,e),t[e])};var Ae={},Pe=f&&l((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Te=W,je=String,Ie=TypeError,Le=function(t){if(Te(t))return t;throw Ie(je(t)+" is not an object")},Re=f,Me=ye,_e=Pe,Ne=Le,De=fe,He=TypeError,Ye=Object.defineProperty,Fe=Object.getOwnPropertyDescriptor,ze="enumerable",Ue="configurable",Be="writable";Ae.f=Re?_e?function(t,e,n){if(Ne(t),e=De(e),Ne(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Be in n&&!n.writable){var r=Fe(t,e);r&&r.writable&&(t[e]=n.value,n={configurable:Ue in n?n.configurable:r.configurable,enumerable:ze in n?n.enumerable:r.enumerable,writable:!1})}return Ye(t,e,n)}:Ye:function(t,e,n){if(Ne(t),e=De(e),Ne(n),Me)try{return Ye(t,e,n)}catch(t){}if("get"in n||"set"in n)throw He("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var Xe=Ae,We=E,Ge=f?function(t,e,n){return Xe.f(t,e,We(1,n))}:function(t,e,n){return t[e]=n,t},Qe={exports:{}},Ke=f,Ze=Yt,Ve=Function.prototype,Je=Ke&&Object.getOwnPropertyDescriptor,qe=Ze(Ve,"name"),$e={EXISTS:qe,PROPER:qe&&"something"===function(){}.name,CONFIGURABLE:qe&&(!Ke||Ke&&Je(Ve,"name").configurable)},tn=B,en=Lt,nn=P(Function.toString);tn(en.inspectSource)||(en.inspectSource=function(t){return nn(t)});var rn,on,an,cn=en.inspectSource,un=B,sn=cn,ln=u.WeakMap,fn=un(ln)&&/native code/.test(sn(ln)),hn=kt.exports,vn=Xt,dn=hn("keys"),pn=function(t){return dn[t]||(dn[t]=vn(t))},gn={},yn=fn,mn=u,xn=P,bn=W,wn=Ge,En=Yt,Sn=Lt,On=pn,Cn=gn,kn="Object already initialized",An=mn.TypeError,Pn=mn.WeakMap;if(yn||Sn.state){var Tn=Sn.state||(Sn.state=new Pn),jn=xn(Tn.get),In=xn(Tn.has),Ln=xn(Tn.set);rn=function(t,e){if(In(Tn,t))throw new An(kn);return e.facade=t,Ln(Tn,t,e),e},on=function(t){return jn(Tn,t)||{}},an=function(t){return In(Tn,t)}}else{var Rn=On("state");Cn[Rn]=!0,rn=function(t,e){if(En(t,Rn))throw new An(kn);return e.facade=t,wn(t,Rn,e),e},on=function(t){return En(t,Rn)?t[Rn]:{}},an=function(t){return En(t,Rn)}}var Mn={set:rn,get:on,has:an,enforce:function(t){return an(t)?on(t):rn(t,{})},getterFor:function(t){return function(e){var n;if(!bn(e)||(n=on(e)).type!==t)throw An("Incompatible receiver, "+t+" required");return n}}},_n=l,Nn=B,Dn=Yt,Hn=f,Yn=$e.CONFIGURABLE,Fn=cn,zn=Mn.enforce,Un=Mn.get,Bn=Object.defineProperty,Xn=Hn&&!_n((function(){return 8!==Bn((function(){}),"length",{value:8}).length})),Wn=String(String).split("String"),Gn=Qe.exports=function(t,e,n){"Symbol("===String(e).slice(0,7)&&(e="["+String(e).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!Dn(t,"name")||Yn&&t.name!==e)&&(Hn?Bn(t,"name",{value:e,configurable:!0}):t.name=e),Xn&&n&&Dn(n,"arity")&&t.length!==n.arity&&Bn(t,"length",{value:n.arity});try{n&&Dn(n,"constructor")&&n.constructor?Hn&&Bn(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=zn(t);return Dn(r,"source")||(r.source=Wn.join("string"==typeof e?e:"")),t};Function.prototype.toString=Gn((function(){return Nn(this)&&Un(this).source||Fn(this)}),"toString");var Qn=B,Kn=Ae,Zn=Qe.exports,Vn=Tt,Jn=function(t,e,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:e;if(Qn(n)&&Zn(n,o,r),r.global)i?t[e]=n:Vn(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:Kn.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},qn={},$n=Math.ceil,tr=Math.floor,er=Math.trunc||function(t){var e=+t;return(e>0?tr:$n)(e)},nr=function(t){var e=+t;return e!=e||0===e?0:er(e)},rr=nr,ir=Math.max,or=Math.min,ar=function(t,e){var n=rr(t);return n<0?ir(n+e,0):or(n,e)},cr=nr,ur=Math.min,sr=function(t){return t>0?ur(cr(t),9007199254740991):0},lr=sr,fr=function(t){return lr(t.length)},hr=U,vr=ar,dr=fr,pr=function(t){return function(e,n,r){var i,o=hr(e),a=dr(o),c=vr(r,a);if(t&&n!=n){for(;a>c;)if((i=o[c++])!=i)return!0}else for(;a>c;c++)if((t||c in o)&&o[c]===n)return t||c||0;return!t&&-1}},gr={includes:pr(!0),indexOf:pr(!1)},yr=Yt,mr=U,xr=gr.indexOf,br=gn,wr=P([].push),Er=function(t,e){var n,r=mr(t),i=0,o=[];for(n in r)!yr(br,n)&&yr(r,n)&&wr(o,n);for(;e.length>i;)yr(r,n=e[i++])&&(~xr(o,n)||wr(o,n));return o},Sr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Or=Er,Cr=Sr.concat("length","prototype");qn.f=Object.getOwnPropertyNames||function(t){return Or(t,Cr)};var kr={};kr.f=Object.getOwnPropertySymbols;var Ar=Z,Pr=qn,Tr=kr,jr=Le,Ir=P([].concat),Lr=Ar("Reflect","ownKeys")||function(t){var e=Pr.f(jr(t)),n=Tr.f;return n?Ir(e,n(t)):e},Rr=Yt,Mr=Lr,_r=s,Nr=Ae,Dr=l,Hr=B,Yr=/#|\.prototype\./,Fr=function(t,e){var n=Ur[zr(t)];return n==Xr||n!=Br&&(Hr(e)?Dr(e):!!e)},zr=Fr.normalize=function(t){return String(t).replace(Yr,".").toLowerCase()},Ur=Fr.data={},Br=Fr.NATIVE="N",Xr=Fr.POLYFILL="P",Wr=Fr,Gr=u,Qr=s.f,Kr=Ge,Zr=Jn,Vr=Tt,Jr=function(t,e,n){for(var r=Mr(e),i=Nr.f,o=_r.f,a=0;a<r.length;a++){var c=r[a];Rr(t,c)||n&&Rr(n,c)||i(t,c,o(e,c))}},qr=Wr,$r=function(t,e){var n,r,i,o,a,c=t.target,u=t.global,s=t.stat;if(n=u?Gr:s?Gr[c]||Vr(c,{}):(Gr[c]||{}).prototype)for(r in e){if(o=e[r],i=t.dontCallGetSet?(a=Qr(n,r))&&a.value:n[r],!qr(u?r:c+(s?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Jr(o,i)}(t.sham||i&&i.sham)&&Kr(o,"sham",!0),Zr(n,r,o,t)}},ti=L,ei=Array.isArray||function(t){return"Array"==ti(t)},ni={};ni[ee("toStringTag")]="z";var ri="[object z]"===String(ni),ii=ri,oi=B,ai=L,ci=ee("toStringTag"),ui=Object,si="Arguments"==ai(function(){return arguments}()),li=ii?ai:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=ui(t),ci))?n:si?ai(e):"Object"==(r=ai(e))&&oi(e.callee)?"Arguments":r},fi=P,hi=l,vi=B,di=li,pi=cn,gi=function(){},yi=[],mi=Z("Reflect","construct"),xi=/^\s*(?:class|function)\b/,bi=fi(xi.exec),wi=!xi.exec(gi),Ei=function(t){if(!vi(t))return!1;try{return mi(gi,yi,t),!0}catch(t){return!1}},Si=function(t){if(!vi(t))return!1;switch(di(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return wi||!!bi(xi,pi(t))}catch(t){return!0}};Si.sham=!0;var Oi=!mi||hi((function(){var t;return Ei(Ei.call)||!Ei(Object)||!Ei((function(){t=!0}))||t}))?Si:Ei,Ci=fe,ki=Ae,Ai=E,Pi=function(t,e,n){var r=Ci(e);r in t?ki.f(t,r,Ai(0,n)):t[r]=n},Ti=l,ji=it,Ii=ee("species"),Li=function(t){return ji>=51||!Ti((function(){var e=[];return(e.constructor={})[Ii]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Ri=P([].slice),Mi=$r,_i=ei,Ni=Oi,Di=W,Hi=ar,Yi=fr,Fi=U,zi=Pi,Ui=ee,Bi=Ri,Xi=Li("slice"),Wi=Ui("species"),Gi=Array,Qi=Math.max;Mi({target:"Array",proto:!0,forced:!Xi},{slice:function(t,e){var n,r,i,o=Fi(this),a=Yi(o),c=Hi(t,a),u=Hi(void 0===e?a:e,a);if(_i(o)&&(n=o.constructor,(Ni(n)&&(n===Gi||_i(n.prototype))||Di(n)&&null===(n=n[Wi]))&&(n=void 0),n===Gi||void 0===n))return Bi(o,c,u);for(r=new(void 0===n?Gi:n)(Qi(u-c,0)),i=0;c<u;c++,i++)c in o&&zi(r,i,o[c]);return r.length=i,r}});var Ki=Nt,Zi=ar,Vi=fr,Ji={},qi=Er,$i=Sr,to=Object.keys||function(t){return qi(t,$i)},eo=f,no=Pe,ro=Ae,io=Le,oo=U,ao=to;Ji.f=eo&&!no?Object.defineProperties:function(t,e){io(t);for(var n,r=oo(e),i=ao(e),o=i.length,a=0;o>a;)ro.f(t,n=i[a++],r[n]);return t};var co,uo=Z("document","documentElement"),so=Le,lo=Ji,fo=Sr,ho=gn,vo=uo,po=pe,go=pn("IE_PROTO"),yo=function(){},mo=function(t){return"<script>"+t+"</"+"script>"},xo=function(t){t.write(mo("")),t.close();var e=t.parentWindow.Object;return t=null,e},bo=function(){try{co=new ActiveXObject("htmlfile")}catch(t){}var t,e;bo="undefined"!=typeof document?document.domain&&co?xo(co):((e=po("iframe")).style.display="none",vo.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(mo("document.F=Object")),t.close(),t.F):xo(co);for(var n=fo.length;n--;)delete bo.prototype[fo[n]];return bo()};ho[go]=!0;var wo=Object.create||function(t,e){var n;return null!==t?(yo.prototype=so(t),n=new yo,yo.prototype=null,n[go]=t):n=bo(),void 0===e?n:lo.f(n,e)},Eo=ee,So=wo,Oo=Ae.f,Co=Eo("unscopables"),ko=Array.prototype;null==ko[Co]&&Oo(ko,Co,{configurable:!0,value:So(null)});var Ao=function(t){ko[Co][t]=!0},Po=function(t){for(var e=Ki(this),n=Vi(e),r=arguments.length,i=Zi(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:Zi(o,n);a>i;)e[i++]=t;return e},To=Ao;$r({target:"Array",proto:!0},{fill:Po}),To("fill");var jo=TypeError,Io=function(t){if(t>9007199254740991)throw jo("Maximum allowed index exceeded");return t},Lo=ei,Ro=Oi,Mo=W,_o=ee("species"),No=Array,Do=function(t){var e;return Lo(t)&&(e=t.constructor,(Ro(e)&&(e===No||Lo(e.prototype))||Mo(e)&&null===(e=e[_o]))&&(e=void 0)),void 0===e?No:e},Ho=function(t,e){return new(Do(t))(0===e?0:e)},Yo=$r,Fo=l,zo=ei,Uo=W,Bo=Nt,Xo=fr,Wo=Io,Go=Pi,Qo=Ho,Ko=Li,Zo=it,Vo=ee("isConcatSpreadable"),Jo=Zo>=51||!Fo((function(){var t=[];return t[Vo]=!1,t.concat()[0]!==t})),qo=Ko("concat"),$o=function(t){if(!Uo(t))return!1;var e=t[Vo];return void 0!==e?!!e:zo(t)};Yo({target:"Array",proto:!0,arity:1,forced:!Jo||!qo},{concat:function(t){var e,n,r,i,o,a=Bo(this),c=Qo(a,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if($o(o=-1===e?a:arguments[e]))for(i=Xo(o),Wo(u+i),n=0;n<i;n++,u++)n in o&&Go(c,u,o[n]);else Wo(u+1),Go(c,u++,o);return c.length=u,c}});var ta=xt,ea=h,na=P(P.bind),ra=function(t,e){return ta(t),void 0===e?t:ea?na(t,e):function(){return t.apply(e,arguments)}},ia=ra,oa=D,aa=Nt,ca=fr,ua=Ho,sa=P([].push),la=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,c=5==t||o;return function(u,s,l,f){for(var h,v,d=aa(u),p=oa(d),g=ia(s,l),y=ca(p),m=0,x=f||ua,b=e?x(u,y):n||a?x(u,0):void 0;y>m;m++)if((c||m in p)&&(v=g(h=p[m],m,d),t))if(e)b[m]=v;else if(v)switch(t){case 3:return!0;case 5:return h;case 6:return m;case 2:sa(b,h)}else switch(t){case 4:return!1;case 7:sa(b,h)}return o?-1:r||i?i:b}},fa={forEach:la(0),map:la(1),filter:la(2),some:la(3),every:la(4),find:la(5),findIndex:la(6),filterReject:la(7)}.map;$r({target:"Array",proto:!0,forced:!Li("map")},{map:function(t){return fa(this,t,arguments.length>1?arguments[1]:void 0)}});var ha,va,da=li,pa=String,ga=function(t){if("Symbol"===da(t))throw TypeError("Cannot convert a Symbol value to a string");return pa(t)},ya=Le,ma=l,xa=u.RegExp,ba=ma((function(){var t=xa("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),wa=ba||ma((function(){return!xa("a","y").sticky})),Ea={BROKEN_CARET:ba||ma((function(){var t=xa("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),MISSED_STICKY:wa,UNSUPPORTED_Y:ba},Sa=l,Oa=u.RegExp,Ca=Sa((function(){var t=Oa(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),ka=l,Aa=u.RegExp,Pa=ka((function(){var t=Aa("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Ta=p,ja=P,Ia=ga,La=function(){var t=ya(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},Ra=Ea,Ma=kt.exports,_a=wo,Na=Mn.get,Da=Ca,Ha=Pa,Ya=Ma("native-string-replace",String.prototype.replace),Fa=RegExp.prototype.exec,za=Fa,Ua=ja("".charAt),Ba=ja("".indexOf),Xa=ja("".replace),Wa=ja("".slice),Ga=(va=/b*/g,Ta(Fa,ha=/a/,"a"),Ta(Fa,va,"a"),0!==ha.lastIndex||0!==va.lastIndex),Qa=Ra.BROKEN_CARET,Ka=void 0!==/()??/.exec("")[1];(Ga||Ka||Qa||Da||Ha)&&(za=function(t){var e,n,r,i,o,a,c,u=this,s=Na(u),l=Ia(t),f=s.raw;if(f)return f.lastIndex=u.lastIndex,e=Ta(za,f,l),u.lastIndex=f.lastIndex,e;var h=s.groups,v=Qa&&u.sticky,d=Ta(La,u),p=u.source,g=0,y=l;if(v&&(d=Xa(d,"y",""),-1===Ba(d,"g")&&(d+="g"),y=Wa(l,u.lastIndex),u.lastIndex>0&&(!u.multiline||u.multiline&&"\n"!==Ua(l,u.lastIndex-1))&&(p="(?: "+p+")",y=" "+y,g++),n=new RegExp("^(?:"+p+")",d)),Ka&&(n=new RegExp("^"+p+"$(?!\\s)",d)),Ga&&(r=u.lastIndex),i=Ta(Fa,v?n:u,y),v?i?(i.input=Wa(i.input,g),i[0]=Wa(i[0],g),i.index=u.lastIndex,u.lastIndex+=i[0].length):u.lastIndex=0:Ga&&i&&(u.lastIndex=u.global?i.index+i[0].length:r),Ka&&i&&i.length>1&&Ta(Ya,i[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)})),i&&h)for(i.groups=a=_a(null),o=0;o<h.length;o++)a[(c=h[o])[0]]=i[c[1]];return i});var Za=za;$r({target:"RegExp",proto:!0,forced:/./.exec!==Za},{exec:Za});var Va=h,Ja=Function.prototype,qa=Ja.apply,$a=Ja.call,tc="object"==typeof Reflect&&Reflect.apply||(Va?$a.bind(qa):function(){return $a.apply(qa,arguments)}),ec=P,nc=Jn,rc=Za,ic=l,oc=ee,ac=Ge,cc=oc("species"),uc=RegExp.prototype,sc=function(t,e,n,r){var i=oc(t),o=!ic((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!ic((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[cc]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var c=ec(/./[i]),u=e(i,""[t],(function(t,e,n,r,i){var a=ec(t),u=e.exec;return u===rc||u===uc.exec?o&&!i?{done:!0,value:c(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));nc(String.prototype,t,u[0]),nc(uc,i,u[1])}r&&ac(uc[i],"sham",!0)},lc=W,fc=L,hc=ee("match"),vc=Oi,dc=pt,pc=TypeError,gc=Le,yc=function(t){if(vc(t))return t;throw pc(dc(t)+" is not a constructor")},mc=ee("species"),xc=function(t,e){var n,r=gc(t).constructor;return void 0===r||null==(n=gc(r)[mc])?e:yc(n)},bc=P,wc=nr,Ec=ga,Sc=Y,Oc=bc("".charAt),Cc=bc("".charCodeAt),kc=bc("".slice),Ac=function(t){return function(e,n){var r,i,o=Ec(Sc(e)),a=wc(n),c=o.length;return a<0||a>=c?t?"":void 0:(r=Cc(o,a))<55296||r>56319||a+1===c||(i=Cc(o,a+1))<56320||i>57343?t?Oc(o,a):r:t?kc(o,a,a+2):i-56320+(r-55296<<10)+65536}},Pc={codeAt:Ac(!1),charAt:Ac(!0)}.charAt,Tc=function(t,e,n){return e+(n?Pc(t,e).length:1)},jc=ar,Ic=fr,Lc=Pi,Rc=Array,Mc=Math.max,_c=p,Nc=Le,Dc=B,Hc=L,Yc=Za,Fc=TypeError,zc=function(t,e){var n=t.exec;if(Dc(n)){var r=_c(n,t,e);return null!==r&&Nc(r),r}if("RegExp"===Hc(t))return _c(Yc,t,e);throw Fc("RegExp#exec called on incompatible receiver")},Uc=tc,Bc=p,Xc=P,Wc=sc,Gc=function(t){var e;return lc(t)&&(void 0!==(e=t[hc])?!!e:"RegExp"==fc(t))},Qc=Le,Kc=Y,Zc=xc,Vc=Tc,Jc=sr,qc=ga,$c=wt,tu=function(t,e,n){for(var r=Ic(t),i=jc(e,r),o=jc(void 0===n?r:n,r),a=Rc(Mc(o-i,0)),c=0;i<o;i++,c++)Lc(a,c,t[i]);return a.length=c,a},eu=zc,nu=Za,ru=l,iu=Ea.UNSUPPORTED_Y,ou=4294967295,au=Math.min,cu=[].push,uu=Xc(/./.exec),su=Xc(cu),lu=Xc("".slice),fu=!ru((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));Wc("split",(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=qc(Kc(this)),i=void 0===n?ou:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!Gc(t))return Bc(e,r,t,i);for(var o,a,c,u=[],s=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),l=0,f=new RegExp(t.source,s+"g");(o=Bc(nu,f,r))&&!((a=f.lastIndex)>l&&(su(u,lu(r,l,o.index)),o.length>1&&o.index<r.length&&Uc(cu,u,tu(o,1)),c=o[0].length,l=a,u.length>=i));)f.lastIndex===o.index&&f.lastIndex++;return l===r.length?!c&&uu(f,"")||su(u,""):su(u,lu(r,l)),u.length>i?tu(u,0,i):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:Bc(e,this,t,n)}:e,[function(e,n){var i=Kc(this),o=null==e?void 0:$c(e,t);return o?Bc(o,e,i,n):Bc(r,qc(i),e,n)},function(t,i){var o=Qc(this),a=qc(t),c=n(r,o,a,i,r!==e);if(c.done)return c.value;var u=Zc(o,RegExp),s=o.unicode,l=(o.ignoreCase?"i":"")+(o.multiline?"m":"")+(o.unicode?"u":"")+(iu?"g":"y"),f=new u(iu?"^(?:"+o.source+")":o,l),h=void 0===i?ou:i>>>0;if(0===h)return[];if(0===a.length)return null===eu(f,a)?[a]:[];for(var v=0,d=0,p=[];d<a.length;){f.lastIndex=iu?0:d;var g,y=eu(f,iu?lu(a,d):a);if(null===y||(g=au(Jc(f.lastIndex+(iu?d:0)),a.length))===v)d=Vc(a,d,s);else{if(su(p,lu(a,v,d)),p.length===h)return p;for(var m=1;m<=y.length-1;m++)if(su(p,y[m]),p.length===h)return p;d=v=g}}return su(p,lu(a,v)),p}]}),!fu,iu);var hu=P,vu=Nt,du=Math.floor,pu=hu("".charAt),gu=hu("".replace),yu=hu("".slice),mu=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,xu=/\$([$&'`]|\d{1,2})/g,bu=tc,wu=p,Eu=P,Su=sc,Ou=l,Cu=Le,ku=B,Au=nr,Pu=sr,Tu=ga,ju=Y,Iu=Tc,Lu=wt,Ru=function(t,e,n,r,i,o){var a=n+t.length,c=r.length,u=xu;return void 0!==i&&(i=vu(i),u=mu),gu(o,u,(function(o,u){var s;switch(pu(u,0)){case"$":return"$";case"&":return t;case"`":return yu(e,0,n);case"'":return yu(e,a);case"<":s=i[yu(u,1,-1)];break;default:var l=+u;if(0===l)return o;if(l>c){var f=du(l/10);return 0===f?o:f<=c?void 0===r[f-1]?pu(u,1):r[f-1]+pu(u,1):o}s=r[l-1]}return void 0===s?"":s}))},Mu=zc,_u=ee("replace"),Nu=Math.max,Du=Math.min,Hu=Eu([].concat),Yu=Eu([].push),Fu=Eu("".indexOf),zu=Eu("".slice),Uu="$0"==="a".replace(/./,"$0"),Bu=!!/./[_u]&&""===/./[_u]("a","$0");Su("replace",(function(t,e,n){var r=Bu?"$":"$0";return[function(t,n){var r=ju(this),i=null==t?void 0:Lu(t,_u);return i?wu(i,t,r,n):wu(e,Tu(r),t,n)},function(t,i){var o=Cu(this),a=Tu(t);if("string"==typeof i&&-1===Fu(i,r)&&-1===Fu(i,"$<")){var c=n(e,o,a,i);if(c.done)return c.value}var u=ku(i);u||(i=Tu(i));var s=o.global;if(s){var l=o.unicode;o.lastIndex=0}for(var f=[];;){var h=Mu(o,a);if(null===h)break;if(Yu(f,h),!s)break;""===Tu(h[0])&&(o.lastIndex=Iu(a,Pu(o.lastIndex),l))}for(var v,d="",p=0,g=0;g<f.length;g++){for(var y=Tu((h=f[g])[0]),m=Nu(Du(Au(h.index),a.length),0),x=[],b=1;b<h.length;b++)Yu(x,void 0===(v=h[b])?v:String(v));var w=h.groups;if(u){var E=Hu([y],x,m,a);void 0!==w&&Yu(E,w);var S=Tu(bu(i,void 0,E))}else S=Ru(y,a,m,x,w,i);m>=p&&(d+=zu(a,p,m)+S,p=m+y.length)}return d+zu(a,p)}]}),!!Ou((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}))||!Uu||Bu);var Xu=gr.includes,Wu=Ao;$r({target:"Array",proto:!0,forced:l((function(){return!Array(1).includes()}))},{includes:function(t){return Xu(this,t,arguments.length>1?arguments[1]:void 0)}}),Wu("includes");var Gu=li,Qu=ri?{}.toString:function(){return"[object "+Gu(this)+"]"};ri||Jn(Object.prototype,"toString",Qu,{unsafe:!0});var Ku,Zu,Vu,Ju,qu="process"==L(u.process),$u=B,ts=String,es=TypeError,ns=P,rs=Le,is=function(t){if("object"==typeof t||$u(t))return t;throw es("Can't set "+ts(t)+" as a prototype")},os=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=ns(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return rs(n),is(r),e?t(n,r):n.__proto__=r,n}}():void 0),as=Ae.f,cs=Yt,us=ee("toStringTag"),ss=Z,ls=Ae,fs=f,hs=ee("species"),vs=V,ds=TypeError,ps=TypeError,gs=/(?:ipad|iphone|ipod).*applewebkit/i.test(J),ys=u,ms=tc,xs=ra,bs=B,ws=Yt,Es=l,Ss=uo,Os=Ri,Cs=pe,ks=function(t,e){if(t<e)throw ps("Not enough arguments");return t},As=gs,Ps=qu,Ts=ys.setImmediate,js=ys.clearImmediate,Is=ys.process,Ls=ys.Dispatch,Rs=ys.Function,Ms=ys.MessageChannel,_s=ys.String,Ns=0,Ds={},Hs="onreadystatechange";try{Ku=ys.location}catch(t){}var Ys=function(t){if(ws(Ds,t)){var e=Ds[t];delete Ds[t],e()}},Fs=function(t){return function(){Ys(t)}},zs=function(t){Ys(t.data)},Us=function(t){ys.postMessage(_s(t),Ku.protocol+"//"+Ku.host)};Ts&&js||(Ts=function(t){ks(arguments.length,1);var e=bs(t)?t:Rs(t),n=Os(arguments,1);return Ds[++Ns]=function(){ms(e,void 0,n)},Zu(Ns),Ns},js=function(t){delete Ds[t]},Ps?Zu=function(t){Is.nextTick(Fs(t))}:Ls&&Ls.now?Zu=function(t){Ls.now(Fs(t))}:Ms&&!As?(Ju=(Vu=new Ms).port2,Vu.port1.onmessage=zs,Zu=xs(Ju.postMessage,Ju)):ys.addEventListener&&bs(ys.postMessage)&&!ys.importScripts&&Ku&&"file:"!==Ku.protocol&&!Es(Us)?(Zu=Us,ys.addEventListener("message",zs,!1)):Zu=Hs in Cs("script")?function(t){Ss.appendChild(Cs("script")).onreadystatechange=function(){Ss.removeChild(this),Ys(t)}}:function(t){setTimeout(Fs(t),0)});var Bs,Xs,Ws,Gs,Qs,Ks,Zs,Vs,Js={set:Ts,clear:js},qs=u,$s=/ipad|iphone|ipod/i.test(J)&&void 0!==qs.Pebble,tl=/web0s(?!.*chrome)/i.test(J),el=u,nl=ra,rl=s.f,il=Js.set,ol=gs,al=$s,cl=tl,ul=qu,sl=el.MutationObserver||el.WebKitMutationObserver,ll=el.document,fl=el.process,hl=el.Promise,vl=rl(el,"queueMicrotask"),dl=vl&&vl.value;dl||(Bs=function(){var t,e;for(ul&&(t=fl.domain)&&t.exit();Xs;){e=Xs.fn,Xs=Xs.next;try{e()}catch(t){throw Xs?Gs():Ws=void 0,t}}Ws=void 0,t&&t.enter()},ol||ul||cl||!sl||!ll?!al&&hl&&hl.resolve?((Zs=hl.resolve(void 0)).constructor=hl,Vs=nl(Zs.then,Zs),Gs=function(){Vs(Bs)}):ul?Gs=function(){fl.nextTick(Bs)}:(il=nl(il,el),Gs=function(){il(Bs)}):(Qs=!0,Ks=ll.createTextNode(""),new sl(Bs).observe(Ks,{characterData:!0}),Gs=function(){Ks.data=Qs=!Qs}));var pl=dl||function(t){var e={fn:t,next:void 0};Ws&&(Ws.next=e),Xs||(Xs=e,Gs()),Ws=e},gl=u,yl=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},ml=function(){this.head=null,this.tail=null};ml.prototype={add:function(t){var e={item:t,next:null};this.head?this.tail.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return this.head=t.next,this.tail===t&&(this.tail=null),t.item}};var xl=ml,bl=u.Promise,wl="object"==typeof window&&"object"!=typeof Deno,El=u,Sl=bl,Ol=B,Cl=Wr,kl=cn,Al=ee,Pl=wl,Tl=it;Sl&&Sl.prototype;var jl=Al("species"),Il=!1,Ll=Ol(El.PromiseRejectionEvent),Rl=Cl("Promise",(function(){var t=kl(Sl),e=t!==String(Sl);if(!e&&66===Tl)return!0;if(Tl>=51&&/native code/.test(t))return!1;var n=new Sl((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};return(n.constructor={})[jl]=r,!(Il=n.then((function(){}))instanceof r)||!e&&Pl&&!Ll})),Ml={CONSTRUCTOR:Rl,REJECTION_EVENT:Ll,SUBCLASSING:Il},_l={},Nl=xt,Dl=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Nl(e),this.reject=Nl(n)};_l.f=function(t){return new Dl(t)};var Hl,Yl,Fl,zl=$r,Ul=qu,Bl=u,Xl=p,Wl=Jn,Gl=os,Ql=function(t,e,n){t&&!n&&(t=t.prototype),t&&!cs(t,us)&&as(t,us,{configurable:!0,value:e})},Kl=function(t){var e=ss(t),n=ls.f;fs&&e&&!e[hs]&&n(e,hs,{configurable:!0,get:function(){return this}})},Zl=xt,Vl=B,Jl=W,ql=function(t,e){if(vs(e,t))return t;throw ds("Incorrect invocation")},$l=xc,tf=Js.set,ef=pl,nf=function(t,e){var n=gl.console;n&&n.error&&(1==arguments.length?n.error(t):n.error(t,e))},rf=yl,of=xl,af=Mn,cf=bl,uf=_l,sf="Promise",lf=Ml.CONSTRUCTOR,ff=Ml.REJECTION_EVENT,hf=Ml.SUBCLASSING,vf=af.getterFor(sf),df=af.set,pf=cf&&cf.prototype,gf=cf,yf=pf,mf=Bl.TypeError,xf=Bl.document,bf=Bl.process,wf=uf.f,Ef=wf,Sf=!!(xf&&xf.createEvent&&Bl.dispatchEvent),Of="unhandledrejection",Cf=function(t){var e;return!(!Jl(t)||!Vl(e=t.then))&&e},kf=function(t,e){var n,r,i,o=e.value,a=1==e.state,c=a?t.ok:t.fail,u=t.resolve,s=t.reject,l=t.domain;try{c?(a||(2===e.rejection&&If(e),e.rejection=1),!0===c?n=o:(l&&l.enter(),n=c(o),l&&(l.exit(),i=!0)),n===t.promise?s(mf("Promise-chain cycle")):(r=Cf(n))?Xl(r,n,u,s):u(n)):s(o)}catch(t){l&&!i&&l.exit(),s(t)}},Af=function(t,e){t.notified||(t.notified=!0,ef((function(){for(var n,r=t.reactions;n=r.get();)kf(n,t);t.notified=!1,e&&!t.rejection&&Tf(t)})))},Pf=function(t,e,n){var r,i;Sf?((r=xf.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Bl.dispatchEvent(r)):r={promise:e,reason:n},!ff&&(i=Bl["on"+t])?i(r):t===Of&&nf("Unhandled promise rejection",n)},Tf=function(t){Xl(tf,Bl,(function(){var e,n=t.facade,r=t.value;if(jf(t)&&(e=rf((function(){Ul?bf.emit("unhandledRejection",r,n):Pf(Of,n,r)})),t.rejection=Ul||jf(t)?2:1,e.error))throw e.value}))},jf=function(t){return 1!==t.rejection&&!t.parent},If=function(t){Xl(tf,Bl,(function(){var e=t.facade;Ul?bf.emit("rejectionHandled",e):Pf("rejectionhandled",e,t.value)}))},Lf=function(t,e,n){return function(r){t(e,r,n)}},Rf=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Af(t,!0))},Mf=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw mf("Promise can't be resolved itself");var r=Cf(e);r?ef((function(){var n={done:!1};try{Xl(r,e,Lf(Mf,n,t),Lf(Rf,n,t))}catch(e){Rf(n,e,t)}})):(t.value=e,t.state=1,Af(t,!1))}catch(e){Rf({done:!1},e,t)}}};if(lf&&(yf=(gf=function(t){ql(this,yf),Zl(t),Xl(Hl,this);var e=vf(this);try{t(Lf(Mf,e),Lf(Rf,e))}catch(t){Rf(e,t)}}).prototype,(Hl=function(t){df(this,{type:sf,done:!1,notified:!1,parent:!1,reactions:new of,rejection:!1,state:0,value:void 0})}).prototype=Wl(yf,"then",(function(t,e){var n=vf(this),r=wf($l(this,gf));return n.parent=!0,r.ok=!Vl(t)||t,r.fail=Vl(e)&&e,r.domain=Ul?bf.domain:void 0,0==n.state?n.reactions.add(r):ef((function(){kf(r,n)})),r.promise})),Yl=function(){var t=new Hl,e=vf(t);this.promise=t,this.resolve=Lf(Mf,e),this.reject=Lf(Rf,e)},uf.f=wf=function(t){return t===gf||undefined===t?new Yl(t):Ef(t)},Vl(cf)&&pf!==Object.prototype)){Fl=pf.then,hf||Wl(pf,"then",(function(t,e){var n=this;return new gf((function(t,e){Xl(Fl,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete pf.constructor}catch(t){}Gl&&Gl(pf,yf)}zl({global:!0,constructor:!0,wrap:!0,forced:lf},{Promise:gf}),Ql(gf,sf,!1),Kl(sf);var _f={},Nf=_f,Df=ee("iterator"),Hf=Array.prototype,Yf=li,Ff=wt,zf=_f,Uf=ee("iterator"),Bf=function(t){if(null!=t)return Ff(t,Uf)||Ff(t,"@@iterator")||zf[Yf(t)]},Xf=p,Wf=xt,Gf=Le,Qf=pt,Kf=Bf,Zf=TypeError,Vf=p,Jf=Le,qf=wt,$f=ra,th=p,eh=Le,nh=pt,rh=function(t){return void 0!==t&&(Nf.Array===t||Hf[Df]===t)},ih=fr,oh=V,ah=function(t,e){var n=arguments.length<2?Kf(t):e;if(Wf(n))return Gf(Xf(n,t));throw Zf(Qf(t)+" is not iterable")},ch=Bf,uh=function(t,e,n){var r,i;Jf(t);try{if(!(r=qf(t,"return"))){if("throw"===e)throw n;return n}r=Vf(r,t)}catch(t){i=!0,r=t}if("throw"===e)throw n;if(i)throw r;return Jf(r),n},sh=TypeError,lh=function(t,e){this.stopped=t,this.result=e},fh=lh.prototype,hh=function(t,e,n){var r,i,o,a,c,u,s,l=n&&n.that,f=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),v=!(!n||!n.IS_ITERATOR),d=!(!n||!n.INTERRUPTED),p=$f(e,l),g=function(t){return r&&uh(r,"normal",t),new lh(!0,t)},y=function(t){return f?(eh(t),d?p(t[0],t[1],g):p(t[0],t[1])):d?p(t,g):p(t)};if(h)r=t.iterator;else if(v)r=t;else{if(!(i=ch(t)))throw sh(nh(t)+" is not iterable");if(rh(i)){for(o=0,a=ih(t);a>o;o++)if((c=y(t[o]))&&oh(fh,c))return c;return new lh(!1)}r=ah(t,i)}for(u=h?t.next:r.next;!(s=th(u,r)).done;){try{c=y(s.value)}catch(t){uh(r,"throw",t)}if("object"==typeof c&&c&&oh(fh,c))return c}return new lh(!1)},vh=ee("iterator"),dh=!1;try{var ph=0,gh={next:function(){return{done:!!ph++}},return:function(){dh=!0}};gh[vh]=function(){return this},Array.from(gh,(function(){throw 2}))}catch(t){}var yh=bl,mh=function(t,e){if(!e&&!dh)return!1;var n=!1;try{var r={};r[vh]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},xh=Ml.CONSTRUCTOR||!mh((function(t){yh.all(t).then(void 0,(function(){}))})),bh=p,wh=xt,Eh=_l,Sh=yl,Oh=hh;$r({target:"Promise",stat:!0,forced:xh},{all:function(t){var e=this,n=Eh.f(e),r=n.resolve,i=n.reject,o=Sh((function(){var n=wh(e.resolve),o=[],a=0,c=1;Oh(t,(function(t){var u=a++,s=!1;c++,bh(n,e,t).then((function(t){s||(s=!0,o[u]=t,--c||r(o))}),i)})),--c||r(o)}));return o.error&&i(o.value),n.promise}});var Ch=$r,kh=Ml.CONSTRUCTOR,Ah=bl,Ph=Z,Th=B,jh=Jn,Ih=Ah&&Ah.prototype;if(Ch({target:"Promise",proto:!0,forced:kh,real:!0},{catch:function(t){return this.then(void 0,t)}}),Th(Ah)){var Lh=Ph("Promise").prototype.catch;Ih.catch!==Lh&&jh(Ih,"catch",Lh,{unsafe:!0})}var Rh=p,Mh=xt,_h=_l,Nh=yl,Dh=hh;$r({target:"Promise",stat:!0,forced:xh},{race:function(t){var e=this,n=_h.f(e),r=n.reject,i=Nh((function(){var i=Mh(e.resolve);Dh(t,(function(t){Rh(i,e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Hh=p,Yh=_l;$r({target:"Promise",stat:!0,forced:Ml.CONSTRUCTOR},{reject:function(t){var e=Yh.f(this);return Hh(e.reject,void 0,t),e.promise}});var Fh=Le,zh=W,Uh=_l,Bh=$r,Xh=Ml.CONSTRUCTOR,Wh=function(t,e){if(Fh(t),zh(e)&&e.constructor===t)return e;var n=Uh.f(t);return(0,n.resolve)(e),n.promise};Z("Promise"),Bh({target:"Promise",stat:!0,forced:Xh},{resolve:function(t){return Wh(this,t)}});var Gh="\t\n\v\f\r                　\u2028\u2029\ufeff",Qh=Y,Kh=ga,Zh=P("".replace),Vh="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Jh=RegExp("^"+Vh+Vh+"*"),qh=RegExp(Vh+Vh+"*$"),$h=function(t){return function(e){var n=Kh(Qh(e));return 1&t&&(n=Zh(n,Jh,"")),2&t&&(n=Zh(n,qh,"")),n}},tv={start:$h(1),end:$h(2),trim:$h(3)},ev=u,nv=l,rv=P,iv=ga,ov=tv.trim,av=Gh,cv=ev.parseInt,uv=ev.Symbol,sv=uv&&uv.iterator,lv=/^[+-]?0x/i,fv=rv(lv.exec),hv=8!==cv(av+"08")||22!==cv(av+"0x16")||sv&&!nv((function(){cv(Object(sv))}))?function(t,e){var n=ov(iv(t));return cv(n,e>>>0||(fv(lv,n)?16:10))}:cv;$r({global:!0,forced:parseInt!=hv},{parseInt:hv});var vv=l,dv=$r,pv=gr.indexOf,gv=function(t,e){var n=[][t];return!!n&&vv((function(){n.call(null,e||function(){return 1},1)}))},yv=P([].indexOf),mv=!!yv&&1/yv([1],1,-0)<0,xv=gv("indexOf");dv({target:"Array",proto:!0,forced:mv||!xv},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return mv?yv(this,t,e)||0:pv(this,t,e)}});var bv=Nt,wv=to;$r({target:"Object",stat:!0,forced:l((function(){wv(1)}))},{keys:function(t){return wv(bv(t))}});var Ev=function(){function t(){r(this,t)}return o(t,null,[{key:"createEl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"div",e=arguments.length>1?arguments[1]:void 0,n=e.styles,r=void 0===n?{}:n,i=e.attrs,o=void 0===i?{}:i,a=e.props,c=void 0===a?{}:a,u=document.createElement(t);return Object.keys(r).map((function(t){u.style[t]=r[t]})),Object.keys(o).map((function(t){u.setAttribute(t,o[t])})),Object.keys(c).map((function(t){u[t]=c[t]})),u}},{key:"hasClass",value:function(t,e){return t.classList.contains(e)}},{key:"addClass",value:function(t,e){t.classList.add(e)}},{key:"removeClass",value:function(t,e){t.classList.remove(e)}},{key:"setAttr",value:function(t,e,n){t.setAttribute(e,n)}},{key:"delAttr",value:function(t,e){t.removeAttribute(e)}},{key:"appendChild",value:function(t,e){t.appendChild(e)}},{key:"removeChild",value:function(t,e){t.removeChild(e)}}]),t}();function Sv(t,e){var n=e.canvasWidth,r=e.canvasHeight,i=e.arrowSize;t.save(),t.beginPath(),t.moveTo(e.points[0].x*n,e.points[0].y*r);for(var o=function(t,e,n,r){var i=function(t,e,n){var r=Math.atan2(e.y-t.y,e.x-t.x),i=.6,o=.3,a=n/3*2,c={x:e.x-Math.round(n*Math.cos(r+i)),y:e.y-Math.round(n*Math.sin(r+i))},u={x:e.x-Math.round(n*Math.cos(r-i)),y:e.y-Math.round(n*Math.sin(r-i))},s={x:e.x-Math.round(a*Math.cos(r+o)),y:e.y-Math.round(a*Math.sin(r+o))};return[t,{x:e.x-Math.round(a*Math.cos(r-o)),y:e.y-Math.round(a*Math.sin(r-o))},u,e,c,s]}(n,e,r);!function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fill()}(t,i)},a=1;a<e.points.length;a++)o(t,{x:e.points[a].x*n,y:e.points[a].y*r},{x:e.points[a-1].x*n,y:e.points[a-1].y*r},i);t.restore()}function Ov(t){return Cv.apply(this,arguments)}function Cv(){return(Cv=n(t().mark((function e(n){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,e){var r=new Image;r.setAttribute("crossOrigin","anonymous"),r.onerror=e,r.onload=function(){return t(r)},r.src=n})));case 1:case"end":return t.stop()}}),e)})))).apply(this,arguments)}function kv(e,r,i){return new Promise(function(){var o=n(t().mark((function n(o,a){var c,u,s,l,f;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=e.toDataURL("image/".concat(i)),u=Ev.createEl("canvas",{styles:{width:"".concat(e.width,"px"),height:"".concat(e.height,"px")},attrs:{width:e.width,height:e.height}}),s=u.getContext("2d"),t.next=5,Ov(r);case 5:return!(l=t.sent)&&a(),s.drawImage(l,0,0,e.width,e.height),t.next=10,Ov(c);case 10:!(f=t.sent)&&a(),s.drawImage(f,0,0,e.width,e.height),o(u.toDataURL("image/".concat(i)));case 14:case"end":return t.stop()}}),n)})));return function(t,e){return o.apply(this,arguments)}}())}function Av(t,e,n,r){var i=t.getBoundingClientRect();return{x:(n-i.left-parseInt(e.paddingLeft)-parseInt(e.borderLeftWidth))*(t.width/parseInt(e.width)),y:(r-i.top-parseInt(e.paddingTop)-parseInt(e.borderTopWidth))*(t.height/parseInt(e.height))}}var Pv=pt,Tv=TypeError,jv=$r,Iv=Nt,Lv=ar,Rv=nr,Mv=fr,_v=Io,Nv=Ho,Dv=Pi,Hv=function(t,e){if(!delete t[e])throw Tv("Cannot delete property "+Pv(e)+" of "+Pv(t))},Yv=Li("splice"),Fv=Math.max,zv=Math.min;jv({target:"Array",proto:!0,forced:!Yv},{splice:function(t,e){var n,r,i,o,a,c,u=Iv(this),s=Mv(u),l=Lv(t,s),f=arguments.length;for(0===f?n=r=0:1===f?(n=0,r=s-l):(n=f-2,r=zv(Fv(Rv(e),0),s-l)),_v(s+n-r),i=Nv(u,r),o=0;o<r;o++)(a=l+o)in u&&Dv(i,o,u[a]);if(i.length=r,n<r){for(o=l;o<s-r;o++)c=o+n,(a=o+r)in u?u[c]=u[a]:Hv(u,c);for(o=s;o>s-r+n;o--)Hv(u,o-1)}else if(n>r)for(o=s-r;o>l;o--)c=o+n-1,(a=o+r-1)in u?u[c]=u[a]:Hv(u,c);for(o=0;o<n;o++)u[o+l]=arguments[o+2];return u.length=s-r+n,i}});var Uv=function(){function t(){r(this,t),this._event={}}return o(t,[{key:"on",value:function(t,e){var n=this._event;t in n||(n[t]=[]),n[t].push(e)}},{key:"off",value:function(t,e){var n=this._event;if(t in n){e||(n[t]=[]);var r=n[t].indexOf(e);r>=0&&n[t].splice(r,1)}}},{key:"trigger",value:function(t,e){var n=this._event;if(n[t])for(var r=0;r<n[t].length;r++){n[t][r].call(this,e)}}},{key:"removeAllListeners",value:function(){this._event={}}}]),t}(),Bv=function(){function e(t){r(this,e);var n=t.container,i=t.bgImg,o=void 0===i?"":i,a=t.lineColor,c=void 0===a?"#f00":a,u=t.lineWidth,s=void 0===u?"1":u,l=t.arrowSize,f=void 0===l?15:l,h=t.eraserSize,v=void 0===h?10:h,d=t.canvasBgColor,p=void 0===d?"#fff":d,g=t.textFontSize,y=void 0===g?16:g,m=t.textLineHeight,x=void 0===m?20:m,b=t.textColor,w=void 0===b?"#f00":b,E=t.textareaPlaceholder,S=void 0===E?-1!==navigator.language.indexOf("zh")?"请点击输入":"Type here...":E,O=t.ratio,C=void 0===O?window.devicePixelRatio||1:O;if(!n)throw Error("No container element were found...");this.configuration={bgImg:o,ratio:C,lineColor:c,lineWidth:s*C,arrowSize:f*C,eraserSize:v*C,textFontSize:y*C,textLineHeight:x*C,textColor:w,canvasBgColor:p,textareaPlaceholder:S},this.container=this.createCanvasOuterBox(n),this.canvas=this.createCanvasEl(this.container,this),this.context=this.canvas.getContext("2d"),this.mode="pencil",this.canvasWidth=this.canvas.width,this.canvasHeight=this.canvas.height,this.originX=null,this.originY=null,this.arrowPoints=[],this.isDrawing=!1,this.image=new Image,this.textareaEl=null,this.measureEl=null,this.historyImage=new Image,this.undoQueue=[],this.redoQueue=[],this.firstDraw=null,this.evt=new Uv,this.init()}var i;return o(e,[{key:"createCanvasOuterBox",value:function(t){var e=Ev.createEl("div",{styles:{height:"".concat(t.clientHeight,"px"),width:"".concat(t.clientWidth,"px"),position:"relative",top:"0"}});return Ev.appendChild(t,e),e}},{key:"createCanvasEl",value:function(t,e){var n=Ev.createEl("canvas",{styles:{height:"".concat(t.clientHeight,"px"),width:"".concat(t.clientWidth,"px")},attrs:{width:t.clientWidth*e.configuration.ratio,height:t.clientHeight*e.configuration.ratio}});return Ev.appendChild(t,n),n}},{key:"init",value:function(){this.canvas_style=window.getComputedStyle(this.canvas),this.context.lineCap="round",this.clear(),this.setBackground(),this.createTextMeasure(),this.canvas.addEventListener("mousedown",this.mouseDown.bind(this)),this.canvas.addEventListener("mousemove",this.mouseMove.bind(this)),this.canvas.addEventListener("mouseup",this.endOfDrawing.bind(this)),this.canvas.addEventListener("mouseleave",this.endOfDrawing.bind(this))}},{key:"mouseDown",value:function(t){this.isDrawing=!0,this.image.src=this.canvas.toDataURL("image/png"),this.redoQueue.length=0;var e=t.clientX,n=t.clientY,r=Av(this.canvas,this.canvas_style,e,n),i=r.x,o=r.y;this.originX=i,this.originY=o,this.ft_originX=this.originX,this.ft_originY=this.originY,this.context.moveTo(this.originX,this.originY),this.context.lineWidth=this.configuration.lineWidth,this.context.strokeStyle=this.configuration.lineColor,this.context.fillStyle=this.configuration.lineColor,this.context.beginPath(),"arrow"===this.mode&&this.saveArrowPoint({x:this.originX,y:this.originY}),"text"===this.mode&&this.createTextArea({x:this.ft_originX,y:this.ft_originY}),this.mode&&"text"!==this.mode&&this.evt.trigger("drawBegin",{x:i,y:o,clientX:e,clientY:n})}},{key:"mouseMove",value:function(t){if(this.isDrawing){var e=t.clientX,n=t.clientY,r=Av(this.canvas,this.canvas_style,e,n),i=r.x,o=r.y,a=this.originX,c=this.originY,u=Math.abs(i-this.originX),s=Math.abs(o-this.originY);i<this.originX&&(a=i),o<this.originY&&(c=o);var l={x:i,y:o,originX:this.originY,originY:this.originY,newOriginX:a,newOriginY:c,distanceX:u,distanceY:s,ft_originX:this.ft_originX,ft_originY:this.ft_originY},f=this.handleMousemove()[this.mode];f&&f(l),this.mode&&"text"!==this.mode&&this.evt.trigger("drawing",{x:i,y:o,clientX:e,clientY:n})}}},{key:"reDraw",value:function(){this.context.clearRect(0,0,this.canvasWidth,this.canvasHeight),this.context.drawImage(this.image,0,0),this.context.beginPath()}},{key:"endOfDrawing",value:function(t){if(this.isDrawing){var e=t.clientX,n=t.clientY,r=Av(this.canvas,this.canvas_style,e,n),i=r.x,o=r.y;this.context.closePath(),this.isDrawing=!1,this.addHistory(),this.mode&&"text"!==this.mode&&this.evt.trigger("drawEnd",{x:i,y:o,clientX:e,clientY:n})}}},{key:"addHistory",value:function(){var t=this.canvas.toDataURL("image/png");this.undoQueue.push(t);var e=this.undoQueue.length;e>20&&(this.firstDraw=this.undoQueue[0],this.undoQueue=this.undoQueue.slice(-20,e))}},{key:"setBackground",value:function(){this.configuration.bgImg&&(this.context.globalCompositeOperation="destination-out",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.canvas.style.background="url(".concat(this.configuration.bgImg,")"),this.canvas.style.backgroundSize="100% 100%",this.canvas.style.backgroundPosition="center",this.canvas.style.backgroundRepeat="no-repeat",this.context.globalCompositeOperation="source-over")}},{key:"handleMousemove",value:function(){var t=this;return{pencil:function(e){var n=e.x,r=e.y;t.context.lineTo(n,r),t.context.stroke()},straightLine:function(e){var n=e.x,r=e.y,i=e.ft_originX,o=e.ft_originY;t.reDraw(),t.context.moveTo(i,o),t.context.lineTo(n,r),t.context.stroke()},rect:function(e){var n=e.newOriginX,r=e.newOriginY,i=e.distanceX,o=e.distanceY;t.reDraw(),t.context.rect(n,r,i,o),t.context.stroke(),t.context.closePath()},fillRect:function(e){var n=e.newOriginX,r=e.newOriginY,i=e.distanceX,o=e.distanceY;t.reDraw(),t.context.rect(n,r,i,o),t.context.stroke(),t.context.fill(),t.context.closePath()},circle:function(e){var n=e.newOriginX,r=e.newOriginY,i=e.distanceX,o=e.distanceY;t.reDraw();var a=Math.sqrt(i*i+o*o);t.context.arc(n+i,r+o,a,0,2*Math.PI),t.context.stroke()},arrow:function(e){var n=e.x,r=e.y;t.reDraw(),t.arrowPoints[1]={x:n/t.canvasWidth,y:r/t.canvasHeight},Sv(t.context,{points:t.arrowPoints,arrowSize:t.configuration.arrowSize,canvasWidth:t.canvasWidth,canvasHeight:t.canvasHeight})},eraser:function(e){var n=e.x,r=e.y;t.configuration.bgImg&&(t.context.globalCompositeOperation="destination-out"),t.context.strokeStyle=t.configuration.canvasBgColor,t.context.fillStyle=t.configuration.canvasBgColor,t.context.lineWidth=t.configuration.eraserSize,t.context.lineTo(n,r),t.context.stroke()},clear:function(){return t.clear()}}}},{key:"saveArrowPoint",value:function(t){this.arrowPoints=[],this.arrowPoints.push({x:t.x/this.canvasWidth,y:t.y/this.canvasHeight})}},{key:"createTextMeasure",value:function(){this.measureEl&&(Ev.removeChild(this.container,this.measureEl),this.measureEl=null),this.measureEl=Ev.createEl("pre",{styles:{fontSize:"".concat(this.configuration.textFontSize,"px"),lineHeight:"".concat(this.configuration.textLineHeight,"px"),color:this.configuration.textColor}}),Ev.addClass(this.measureEl,"__edb-text-pre"),Ev.appendChild(this.container,this.measureEl)}},{key:"drawText",value:function(t,e){e.font=e.font||'"PingFang SC","Microsoft YaHei","微软雅黑"';var n=e.text;t.save(),t.textBaseline="middle",t.font="".concat(e.textFontSize,"px/").concat(e.textLineHeight,"px ").concat(e.font),t.fillStyle=e.textColor,t.globalCompositeOperation="source-over",n.replace(/<br>/g,"\n").split(/\n/).map((function(n,r){t.fillText(n,e.position.x+2,e.position.y+r*e.textLineHeight+e.textLineHeight/2+2)})),t.restore(),this.evt.trigger("drawChange")}},{key:"createTextArea",value:function(t){var e=this;this.boxDom&&Ev.removeChild(this.container,this.boxDom),this.boxDom=Ev.createEl("div",{styles:{position:"absolute",left:"".concat(t.x/this.configuration.ratio,"px"),top:"".concat(t.y/this.configuration.ratio,"px"),lineHeight:"".concat(this.configuration.textLineHeight/this.configuration.ratio,"px"),fontSize:"".concat(this.configuration.textFontSize/this.configuration.ratio,"px")}}),Ev.addClass(this.boxDom,"__edb-textarea-box"),this.textareaEl=Ev.createEl("textarea",{styles:{color:this.configuration.textColor,lineHeight:"".concat(this.configuration.textLineHeight/this.configuration.ratio,"px"),fontSize:"".concat(this.configuration.textFontSize/this.configuration.ratio,"px")},props:{placeholder:this.configuration.textareaPlaceholder}}),Ev.addClass(this.textareaEl,"__edb-textarea"),Ev.appendChild(this.boxDom,this.textareaEl),Ev.appendChild(this.container,this.boxDom),setTimeout((function(){e.textareaEl.focus(),e.textareaEl.onblur=function(){e.drawText(e.context,{text:e.textareaEl.value,textColor:e.configuration.textColor,textFontSize:e.configuration.textFontSize,textLineHeight:e.configuration.textLineHeight,position:t}),Ev.removeChild(e.container,e.boxDom),e.boxDom=null,e.textareaEl=null},e.textareaEl.addEventListener("input",(function(t){e.measureEl.innerHTML=t.target.value+" ",e.textareaEl.style.width=e.measureEl.clientWidth/e.configuration.ratio+"px",e.textareaEl.style.height=e.measureEl.clientHeight/e.configuration.ratio+"px"}))}),50)}},{key:"resetBgImg",value:function(){this.redoQueue.length=0,this.undoQueue.length=0,this.clear(!1),this.setBackground()}},{key:"config",value:function(t,e){switch(["lineWidth","arrowSize","eraserSize","textFontSize","textLineHeight"].includes(t)?this.configuration[t]=e*this.configuration.ratio:this.configuration[t]=e,t){case"canvasBgColor":this.clear(!1);break;case"bgImg":this.resetBgImg();break;case"textFontSize":case"textColor":case"textLineHeight":this.createTextMeasure()}}},{key:"setMode",value:function(t){this.context.globalCompositeOperation="source-over",this.context.strokeStyle=this.configuration.lineColor,this.context.fillStyle=this.configuration.lineColor,this.context.lineWidth=this.configuration.lineWidth,"eraser"===t?Ev.addClass(this.container,"__edb-eraser-hover"):Ev.removeClass(this.container,"__edb-eraser-hover"),this.mode=t}},{key:"undo",value:function(){var t=this,e=this.undoQueue.length;if(0!==e){if(1===e){if(!this.firstDraw)return this.redoQueue.push(this.undoQueue.pop()),this.clear(!1),void this.evt.trigger("drawChange");this.historyImage.src=this.firstDraw}else this.historyImage.src=this.undoQueue[e-2];this.historyImage.onload=function(){t.clear(!1),t.context.drawImage(t.historyImage,0,0),t.redoQueue.push(t.undoQueue.pop()),t.evt.trigger("drawChange")}}}},{key:"redo",value:function(){var t=this;0!==this.redoQueue.length&&(this.undoQueue.push(this.redoQueue.pop()),this.historyImage.src=this.undoQueue[this.undoQueue.length-1],this.historyImage.onload=function(){t.clear(!1),t.context.drawImage(t.historyImage,0,0),t.evt.trigger("drawChange")})}},{key:"generateBase64",value:function(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";return new Promise(function(){var i=n(t().mark((function n(i){var o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.configuration.bgImg){t.next=7;break}return t.next=3,kv(e.canvas,e.configuration.bgImg,r);case 3:o=t.sent,i(o),t.next=8;break;case 7:i(e.canvas.toDataURL("image/".concat(r)));case 8:case"end":return t.stop()}}),n)})));return function(t){return i.apply(this,arguments)}}())}},{key:"saveImg",value:(i=n(t().mark((function e(){var n,r,i=arguments;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>0&&void 0!==i[0]?i[0]:{type:"png",fileName:"canvas_image"},r=null,!this.configuration.bgImg){t.next=8;break}return t.next=5,kv(this.canvas,this.configuration.bgImg,n.type);case 5:r=t.sent,t.next=9;break;case 8:r=this.canvas.toDataURL("image/".concat(n.type));case 9:Ev.createEl("a",{attrs:{href:r,download:"".concat(n.fileName,".").concat(n.type)}}).click();case 11:case"end":return t.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"clear",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.canvas.width=this.canvasWidth,this.canvas.height=this.canvasHeight,this.configuration.bgImg&&(this.context.globalCompositeOperation="destination-out",this.context.fillRect(0,0,this.canvasWidth,this.canvasHeight),this.context.globalCompositeOperation="source-over"),this.undoQueue.length&&t){var e=this.canvas.toDataURL("image/png");this.undoQueue.push(e),this.evt.trigger("drawChange")}}}]),e}();return Bv}();
